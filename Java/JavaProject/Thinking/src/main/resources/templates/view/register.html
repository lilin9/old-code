
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <script src="/js/jquery-3.6.3.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <link href="/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="/css/main.css" rel="stylesheet"/>
<!--    <style>-->
<!--        #divStyle{-->
<!--            width: 365px;-->
<!--            width: 500px;-->
<!--            margin: 0 auto;-->
<!--            margin-top: 200px;-->
<!--        }-->

<!--        .btm{-->
<!--            width: 168px;-->
<!--        }-->
<!--        #btmStyle{-->
<!--            margin-top: 36px;-->
<!--            text-align: right;-->
<!--        }-->

<!--        a{-->
<!--            text-decoration: none;-->
<!--        }-->

<!--        label{-->
<!--            margin: 10px 0px;-->
<!--        }-->
<!--    </style>-->
</head>
<body>
<div class="divStyle" >
    <form id="registerForm">
        <div class="form-group">
            <label for="humanName">用户名</label>
            <input type="text" name="humanName" class="form-control" id="humanName">
        </div>
        <div class="form-group">
            <label for="humanNiceName">昵称</label>
            <input type="text" name="humanNiceName" class="form-control" id="humanNiceName">
        </div>
        <div class="form-group">
            <label for="humanPassword">密码</label>
            <input type="password" name="humanPassword" class="form-control" id="humanPassword">
        </div>

        <div class="form-group">
            <label for="humanEmail">电子邮件</label>
            <input type="email" name="humanEmail" class="form-control" id="humanEmail" aria-describedby="emailHelp">
            <small id="emailHelp" class="form-text text-muted">请输入正确的电子邮件.</small>
        </div>

        <div class="btmStyle">
            <button type="button" class="btn btn-primary btm" id="registerBtn">注册</button>
            <a th:href="@{/to/login}">登录</a>
        </div>

    </form>
</div>

<script type="module">
    import utils from '/js/utils.js';
    //点击注册时
    $("#registerBtn").click(function () {
        //获取注册表单数据,并转成 json 数据
        let userData = utils.getObjectJson($("#registerForm").serializeArray());
        //异步提交表单数据
        $.ajax({
            type: "POST",
            url: "/register",
            async: false,
            data: userData,
            dataType: "json",
            headers: {'Content-Type': 'application/json'},
            success: function (data) {
                console.log(data);
                //是不是注册成功
                if (data.code == "200") {
                    //去登录页
                    window.location.href = "./login.html";
                } else {
                    alert(data.message + ", 请重新注册");
                }
            }
        });
    });
</script>
</body>
</html>