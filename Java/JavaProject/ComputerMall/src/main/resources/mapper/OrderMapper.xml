<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lilin.mapper.OrderMapper">
    <resultMap id="OrderEntityMapper" type="com.lilin.pojo.Order">
        <!--在定义映射规则时主键不可省略-->
        <result property="oid" column="oid" />

        <result property="recvName" column="recv_name" />
        <result property="recvPhone" column="recv_phone" />
        <result property="recvProvince" column="recv_province" />
        <result property="recvCity" column="recv_city" />
        <result property="recvArea" column="recv_area" />
        <result property="recvAddress" column="recv_address" />
        <result property="totalPrice" column="total_price" />
        <result property="orderTime" column="order_time" />
        <result property="payTime" column="pay_time" />
        <result property="createdUser" column="created_user" />
        <result property="createdTime" column="created_time" />
        <result property="modifiedUser" column="modified_user" />
        <result property="modifiedTime" column="modified_time" />
    </resultMap>
    <resultMap id="OrderItemEntityMapper" type="com.lilin.pojo.OrderItem">
        <!--在定义映射规则时主键不可省略-->
        <result property="id" column="id" />

        <result property="createdUser" column="created_user" />
        <result property="createdTime" column="created_time" />
        <result property="modifiedUser" column="modified_user" />
        <result property="modifiedTime" column="modified_time" />
    </resultMap>

    <!--Integer insertToOrder(Order order);-->
    <insert id="insertToOrder" useGeneratedKeys="true" keyProperty="oid">
        insert into
            t_order(uid,recv_name,recv_phone,recv_province,recv_city,recv_area,recv_address,total_price,
                    `status`,order_time,pay_time,created_user,created_time,modified_user,modified_time)
        values
           (#{uid},#{recvName},#{recvPhone},#{recvProvince},#{recvCity},#{recvArea},#{recvAddress},
            #{totalPrice},#{status},#{orderTime},#{payTime},#{createdUser},#{createdTime},
            #{modifiedUser},#{modifiedTime})
    </insert>
    <!--Integer insertToOrderItem(OrderItem orderItem);-->
    <insert id="insertToOrderItem" useGeneratedKeys="true" keyProperty="id">
        insert into
            t_order_item(oid,pid,title,image,price,num,created_user,created_time,modified_user,
                         modified_time)
        values
           (#{oid},#{pid},#{title},#{image},#{price},#{num},#{createdUser},#{createdTime},#{modifiedUser},
            #{modifiedTime})
    </insert>

</mapper>